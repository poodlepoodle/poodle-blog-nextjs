'use client';

import Image from 'next/image';
import Link from 'next/link';
import { useUIStore } from '@stores/ui-store';
import { HEADER_MENU_ITEMS } from '@/constants';
import { usePathname } from 'next/navigation';
import { cn } from '@/utils/cn';

const SpotlightedIcon = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="14"
      height="14"
      viewBox="0 0 16 16"
      fill="none"
      className="shrink-0"
    >
      <path
        d="M0.421053 10.1053C0.308772 10.1053 0.210526 10.0632 0.126316 9.97895C0.0421053 9.89474 0 9.79649 0 9.68421C0 9.57193 0.0421053 9.47368 0.126316 9.38947C0.210526 9.30526 0.308772 9.26316 0.421053 9.26316C0.533333 9.26316 0.631579 9.30526 0.715789 9.38947C0.8 9.47368 0.842105 9.57193 0.842105 9.68421C0.842105 9.79649 0.8 9.89474 0.715789 9.97895C0.631579 10.0632 0.533333 10.1053 0.421053 10.1053ZM0.421053 6.73684C0.308772 6.73684 0.210526 6.69474 0.126316 6.61053C0.0421053 6.52632 0 6.42807 0 6.31579C0 6.20351 0.0421053 6.10526 0.126316 6.02105C0.210526 5.93684 0.308772 5.89474 0.421053 5.89474C0.533333 5.89474 0.631579 5.93684 0.715789 6.02105C0.8 6.10526 0.842105 6.20351 0.842105 6.31579C0.842105 6.42807 0.8 6.52632 0.715789 6.61053C0.631579 6.69474 0.533333 6.73684 0.421053 6.73684ZM2.94737 13.8947C2.70877 13.8947 2.50877 13.814 2.34737 13.6526C2.18596 13.4912 2.10526 13.2912 2.10526 13.0526C2.10526 12.814 2.18596 12.614 2.34737 12.4526C2.50877 12.2912 2.70877 12.2105 2.94737 12.2105C3.18596 12.2105 3.38596 12.2912 3.54737 12.4526C3.70877 12.614 3.78947 12.814 3.78947 13.0526C3.78947 13.2912 3.70877 13.4912 3.54737 13.6526C3.38596 13.814 3.18596 13.8947 2.94737 13.8947ZM2.94737 10.5263C2.70877 10.5263 2.50877 10.4456 2.34737 10.2842C2.18596 10.1228 2.10526 9.92281 2.10526 9.68421C2.10526 9.44561 2.18596 9.24561 2.34737 9.08421C2.50877 8.92281 2.70877 8.8421 2.94737 8.8421C3.18596 8.8421 3.38596 8.92281 3.54737 9.08421C3.70877 9.24561 3.78947 9.44561 3.78947 9.68421C3.78947 9.92281 3.70877 10.1228 3.54737 10.2842C3.38596 10.4456 3.18596 10.5263 2.94737 10.5263ZM2.94737 7.15789C2.70877 7.15789 2.50877 7.07719 2.34737 6.91579C2.18596 6.75439 2.10526 6.55439 2.10526 6.31579C2.10526 6.07719 2.18596 5.87719 2.34737 5.71579C2.50877 5.55439 2.70877 5.47368 2.94737 5.47368C3.18596 5.47368 3.38596 5.55439 3.54737 5.71579C3.70877 5.87719 3.78947 6.07719 3.78947 6.31579C3.78947 6.55439 3.70877 6.75439 3.54737 6.91579C3.38596 7.07719 3.18596 7.15789 2.94737 7.15789ZM2.94737 3.78947C2.70877 3.78947 2.50877 3.70877 2.34737 3.54737C2.18596 3.38596 2.10526 3.18596 2.10526 2.94737C2.10526 2.70877 2.18596 2.50877 2.34737 2.34737C2.50877 2.18596 2.70877 2.10526 2.94737 2.10526C3.18596 2.10526 3.38596 2.18596 3.54737 2.34737C3.70877 2.50877 3.78947 2.70877 3.78947 2.94737C3.78947 3.18596 3.70877 3.38596 3.54737 3.54737C3.38596 3.70877 3.18596 3.78947 2.94737 3.78947ZM6.31579 10.9474C5.96491 10.9474 5.66667 10.8246 5.42105 10.5789C5.17544 10.3333 5.05263 10.0351 5.05263 9.68421C5.05263 9.33333 5.17544 9.03509 5.42105 8.78947C5.66667 8.54386 5.96491 8.42105 6.31579 8.42105C6.66667 8.42105 6.96491 8.54386 7.21053 8.78947C7.45614 9.03509 7.57895 9.33333 7.57895 9.68421C7.57895 10.0351 7.45614 10.3333 7.21053 10.5789C6.96491 10.8246 6.66667 10.9474 6.31579 10.9474ZM6.31579 7.57895C5.96491 7.57895 5.66667 7.45614 5.42105 7.21053C5.17544 6.96491 5.05263 6.66667 5.05263 6.31579C5.05263 5.96491 5.17544 5.66667 5.42105 5.42105C5.66667 5.17544 5.96491 5.05263 6.31579 5.05263C6.66667 5.05263 6.96491 5.17544 7.21053 5.42105C7.45614 5.66667 7.57895 5.96491 7.57895 6.31579C7.57895 6.66667 7.45614 6.96491 7.21053 7.21053C6.96491 7.45614 6.66667 7.57895 6.31579 7.57895ZM6.31579 13.8947C6.07719 13.8947 5.87719 13.814 5.71579 13.6526C5.55439 13.4912 5.47368 13.2912 5.47368 13.0526C5.47368 12.814 5.55439 12.614 5.71579 12.4526C5.87719 12.2912 6.07719 12.2105 6.31579 12.2105C6.55439 12.2105 6.75439 12.2912 6.91579 12.4526C7.07719 12.614 7.15789 12.814 7.15789 13.0526C7.15789 13.2912 7.07719 13.4912 6.91579 13.6526C6.75439 13.814 6.55439 13.8947 6.31579 13.8947ZM6.31579 3.78947C6.07719 3.78947 5.87719 3.70877 5.71579 3.54737C5.55439 3.38596 5.47368 3.18596 5.47368 2.94737C5.47368 2.70877 5.55439 2.50877 5.71579 2.34737C5.87719 2.18596 6.07719 2.10526 6.31579 2.10526C6.55439 2.10526 6.75439 2.18596 6.91579 2.34737C7.07719 2.50877 7.15789 2.70877 7.15789 2.94737C7.15789 3.18596 7.07719 3.38596 6.91579 3.54737C6.75439 3.70877 6.55439 3.78947 6.31579 3.78947ZM6.31579 16C6.20351 16 6.10526 15.9579 6.02105 15.8737C5.93684 15.7895 5.89474 15.6912 5.89474 15.5789C5.89474 15.4667 5.93684 15.3684 6.02105 15.2842C6.10526 15.2 6.20351 15.1579 6.31579 15.1579C6.42807 15.1579 6.52632 15.2 6.61053 15.2842C6.69474 15.3684 6.73684 15.4667 6.73684 15.5789C6.73684 15.6912 6.69474 15.7895 6.61053 15.8737C6.52632 15.9579 6.42807 16 6.31579 16ZM6.31579 0.842105C6.20351 0.842105 6.10526 0.8 6.02105 0.715789C5.93684 0.631579 5.89474 0.533333 5.89474 0.421053C5.89474 0.308772 5.93684 0.210526 6.02105 0.126316C6.10526 0.0421053 6.20351 0 6.31579 0C6.42807 0 6.52632 0.0421053 6.61053 0.126316C6.69474 0.210526 6.73684 0.308772 6.73684 0.421053C6.73684 0.533333 6.69474 0.631579 6.61053 0.715789C6.52632 0.8 6.42807 0.842105 6.31579 0.842105ZM9.68421 10.9474C9.33333 10.9474 9.03509 10.8246 8.78947 10.5789C8.54386 10.3333 8.42105 10.0351 8.42105 9.68421C8.42105 9.33333 8.54386 9.03509 8.78947 8.78947C9.03509 8.54386 9.33333 8.42105 9.68421 8.42105C10.0351 8.42105 10.3333 8.54386 10.5789 8.78947C10.8246 9.03509 10.9474 9.33333 10.9474 9.68421C10.9474 10.0351 10.8246 10.3333 10.5789 10.5789C10.3333 10.8246 10.0351 10.9474 9.68421 10.9474ZM9.68421 7.57895C9.33333 7.57895 9.03509 7.45614 8.78947 7.21053C8.54386 6.96491 8.42105 6.66667 8.42105 6.31579C8.42105 5.96491 8.54386 5.66667 8.78947 5.42105C9.03509 5.17544 9.33333 5.05263 9.68421 5.05263C10.0351 5.05263 10.3333 5.17544 10.5789 5.42105C10.8246 5.66667 10.9474 5.96491 10.9474 6.31579C10.9474 6.66667 10.8246 6.96491 10.5789 7.21053C10.3333 7.45614 10.0351 7.57895 9.68421 7.57895ZM9.68421 13.8947C9.44561 13.8947 9.24561 13.814 9.08421 13.6526C8.92281 13.4912 8.8421 13.2912 8.8421 13.0526C8.8421 12.814 8.92281 12.614 9.08421 12.4526C9.24561 12.2912 9.44561 12.2105 9.68421 12.2105C9.92281 12.2105 10.1228 12.2912 10.2842 12.4526C10.4456 12.614 10.5263 12.814 10.5263 13.0526C10.5263 13.2912 10.4456 13.4912 10.2842 13.6526C10.1228 13.814 9.92281 13.8947 9.68421 13.8947ZM9.68421 3.78947C9.44561 3.78947 9.24561 3.70877 9.08421 3.54737C8.92281 3.38596 8.8421 3.18596 8.8421 2.94737C8.8421 2.70877 8.92281 2.50877 9.08421 2.34737C9.24561 2.18596 9.44561 2.10526 9.68421 2.10526C9.92281 2.10526 10.1228 2.18596 10.2842 2.34737C10.4456 2.50877 10.5263 2.70877 10.5263 2.94737C10.5263 3.18596 10.4456 3.38596 10.2842 3.54737C10.1228 3.70877 9.92281 3.78947 9.68421 3.78947ZM9.68421 16C9.57193 16 9.47368 15.9579 9.38947 15.8737C9.30526 15.7895 9.26316 15.6912 9.26316 15.5789C9.26316 15.4667 9.30526 15.3684 9.38947 15.2842C9.47368 15.2 9.57193 15.1579 9.68421 15.1579C9.79649 15.1579 9.89474 15.2 9.97895 15.2842C10.0632 15.3684 10.1053 15.4667 10.1053 15.5789C10.1053 15.6912 10.0632 15.7895 9.97895 15.8737C9.89474 15.9579 9.79649 16 9.68421 16ZM9.68421 0.842105C9.57193 0.842105 9.47368 0.8 9.38947 0.715789C9.30526 0.631579 9.26316 0.533333 9.26316 0.421053C9.26316 0.308772 9.30526 0.210526 9.38947 0.126316C9.47368 0.0421053 9.57193 0 9.68421 0C9.79649 0 9.89474 0.0421053 9.97895 0.126316C10.0632 0.210526 10.1053 0.308772 10.1053 0.421053C10.1053 0.533333 10.0632 0.631579 9.97895 0.715789C9.89474 0.8 9.79649 0.842105 9.68421 0.842105ZM13.0526 13.8947C12.814 13.8947 12.614 13.814 12.4526 13.6526C12.2912 13.4912 12.2105 13.2912 12.2105 13.0526C12.2105 12.814 12.2912 12.614 12.4526 12.4526C12.614 12.2912 12.814 12.2105 13.0526 12.2105C13.2912 12.2105 13.4912 12.2912 13.6526 12.4526C13.814 12.614 13.8947 12.814 13.8947 13.0526C13.8947 13.2912 13.814 13.4912 13.6526 13.6526C13.4912 13.814 13.2912 13.8947 13.0526 13.8947ZM13.0526 10.5263C12.814 10.5263 12.614 10.4456 12.4526 10.2842C12.2912 10.1228 12.2105 9.92281 12.2105 9.68421C12.2105 9.44561 12.2912 9.24561 12.4526 9.08421C12.614 8.92281 12.814 8.8421 13.0526 8.8421C13.2912 8.8421 13.4912 8.92281 13.6526 9.08421C13.814 9.24561 13.8947 9.44561 13.8947 9.68421C13.8947 9.92281 13.814 10.1228 13.6526 10.2842C13.4912 10.4456 13.2912 10.5263 13.0526 10.5263ZM13.0526 7.15789C12.814 7.15789 12.614 7.07719 12.4526 6.91579C12.2912 6.75439 12.2105 6.55439 12.2105 6.31579C12.2105 6.07719 12.2912 5.87719 12.4526 5.71579C12.614 5.55439 12.814 5.47368 13.0526 5.47368C13.2912 5.47368 13.4912 5.55439 13.6526 5.71579C13.814 5.87719 13.8947 6.07719 13.8947 6.31579C13.8947 6.55439 13.814 6.75439 13.6526 6.91579C13.4912 7.07719 13.2912 7.15789 13.0526 7.15789ZM13.0526 3.78947C12.814 3.78947 12.614 3.70877 12.4526 3.54737C12.2912 3.38596 12.2105 3.18596 12.2105 2.94737C12.2105 2.70877 12.2912 2.50877 12.4526 2.34737C12.614 2.18596 12.814 2.10526 13.0526 2.10526C13.2912 2.10526 13.4912 2.18596 13.6526 2.34737C13.814 2.50877 13.8947 2.70877 13.8947 2.94737C13.8947 3.18596 13.814 3.38596 13.6526 3.54737C13.4912 3.70877 13.2912 3.78947 13.0526 3.78947ZM15.5789 10.1053C15.4667 10.1053 15.3684 10.0632 15.2842 9.97895C15.2 9.89474 15.1579 9.79649 15.1579 9.68421C15.1579 9.57193 15.2 9.47368 15.2842 9.38947C15.3684 9.30526 15.4667 9.26316 15.5789 9.26316C15.6912 9.26316 15.7895 9.30526 15.8737 9.38947C15.9579 9.47368 16 9.57193 16 9.68421C16 9.79649 15.9579 9.89474 15.8737 9.97895C15.7895 10.0632 15.6912 10.1053 15.5789 10.1053ZM15.5789 6.73684C15.4667 6.73684 15.3684 6.69474 15.2842 6.61053C15.2 6.52632 15.1579 6.42807 15.1579 6.31579C15.1579 6.20351 15.2 6.10526 15.2842 6.02105C15.3684 5.93684 15.4667 5.89474 15.5789 5.89474C15.6912 5.89474 15.7895 5.93684 15.8737 6.02105C15.9579 6.10526 16 6.20351 16 6.31579C16 6.42807 15.9579 6.52632 15.8737 6.61053C15.7895 6.69474 15.6912 6.73684 15.5789 6.73684Z"
        className="fill-black"
      />
    </svg>
  );
};

export const Header = () => {
  const isFloating = useUIStore(state => state.isFloating);
  const isSpotlighted = useUIStore(state => state.isSpotlighted);
  const headerText = useUIStore(state => state.headerText);
  const pathname = usePathname();

  const isHeaderSpotlighted = isSpotlighted && !!headerText;

  return (
    <header
      className={cn(
        'fixed top-0 z-10 flex w-full items-center justify-center border-b-[0.5px] bg-[rgba(255,255,255,0.1)] backdrop-blur-[0.5rem] backdrop-saturate-200 transition-all duration-300',
        isFloating
          ? 'border-gray-2'
          : isSpotlighted
            ? 'border-gray-3'
            : 'border-transparent',
        isHeaderSpotlighted ? 'h-header-spotlighted' : 'h-header'
      )}
    >
      <div className="flex h-full w-full max-w-container items-center justify-between gap-[1.5rem] px-[2rem] tablet:px-[1.5rem] desktop:px-0">
        {isHeaderSpotlighted ? (
          <div className="flex flex-grow items-center gap-[0.5rem] desktop:pl-[0.75rem]">
            <SpotlightedIcon />
            <span className="line-clamp-1 text-sm font-semibold text-black">
              {headerText}
            </span>
          </div>
        ) : (
          <Link
            href="/"
            className="relative h-[2.5rem] w-[2.5rem] opacity-100 transition-opacity duration-300 hover:opacity-50"
          >
            <Image
              src={`/components/header/wave.png`}
              alt="profile pic in top navigation"
              fill
              className="object-cover"
            />
          </Link>
        )}

        {!isHeaderSpotlighted && (
          <nav className="flex h-full shrink-0 items-center gap-items">
            {HEADER_MENU_ITEMS.map(({ label, href }) => (
              <Link
                key={href}
                href={href}
                className="group flex h-full items-center"
              >
                <span
                  className={cn(
                    'text-sm font-semibold transition-colors duration-300 group-hover:text-skyblue',
                    pathname.startsWith(href) ? 'text-skyblue' : 'text-black'
                  )}
                >
                  {label}
                </span>
              </Link>
            ))}
          </nav>
        )}
      </div>
    </header>
  );
};
